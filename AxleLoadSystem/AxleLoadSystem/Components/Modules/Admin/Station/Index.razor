@page "/station/{mode?}/{id:int?}"
@inherits BasePageComponent
@inject IStationService stationService
@rendermode InteractiveServer

@if (string.IsNullOrEmpty(Mode))
{
    <StationList/>
}
else
{
    <FormComponent station="station" Mode="SelectedFormMode" />
}

@code {
    [Parameter]
    public string Mode { get; set; }
    [Parameter]
    public int Id { get; set; }
    private Station station { get; set; } = null;
    private FormMode SelectedFormMode { get; set; }

    protected override async Task OnParametersSetAsync()
    {
        if (string.IsNullOrEmpty(Mode))
        {
            return;
        }

        if (Mode.ToLower() == "new")
        {
            SelectedFormMode = FormMode.Add;
            station = new();
        }
        else if (Id > 0)
        {
            station = new() { StationId = Id };
            station = await stationService.GetById(station);

            if (Mode.ToLower() == "details")
            {
                SelectedFormMode = FormMode.Details;
            }
            else if (Mode.ToLower() == "edit")
            {
                SelectedFormMode = FormMode.Edit;
            }
        }
    }
}
